# PAICORE_Datapath 

本数据通路实际上完成的64bit数据流的传输，并不限制平台，只要能够实现axis和axil协议的硬件平台即可。

目前支持的平台是7100和PCIe。


## 概述

rtl代码与硬件无关，通过tcl区分不同的硬件板卡对应的工程。

考虑流水线推理的数据通路

PCIe的axis读似乎并不快，还不如用axil将输出一个个读出来，对于分类任务来说，输出数目很少，没必要用stream（已经证伪，对于十来个数据，使用寄存器有一定加速效果，但也只在微妙级别，整个数据通路瓶颈并不在此）

反而是使用stream传输时数据，传100个和100000个数据，耗时差不太多。

## 数据通路设计细节

对于PCIe来说，数据发送时可能会产生多个TLAST信号，因此不能直接用TLAST，用axis_gen_last模块来生成正确的tlast信号，需要指定此次发送的数据量

而在接收时，需要明确知道接收多少个数据，因此使用axis_dataPadding模块将TLAST后的数据进行0的填充

在接收PAICORE数据时，用到了transport_up模块，需要对done和busy信号进行判断，后续要考虑双通道时该如何处理。